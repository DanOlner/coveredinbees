<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.32">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2025-12-12">

<title>Why make things simple / the Douglas Adams principle ‚Äì COVEREDINBEES / A hive of TLDR &amp; villainy</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dark-2fef5ea3f8957b3e4ecc936fc74692ca.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-d1bc6f614ba88f364c300e7bcb0cfc61.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="dark">
<script src="../../site_libs/quarto-contrib/iconify-2.1.0/iconify-icon.min.js"></script>
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../../images/cib_stripes.png" alt="" class="navbar-logo">
    </a>
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">COVEREDINBEES / A hive of TLDR &amp; villainy</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/DanOlner"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.linkedin.com/in/danolner/"> <i class="bi bi-linkedin" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://bsky.app/profile/danolner.bsky.social"> 
<span class="menu-text"><iconify-icon role="img" inline="" icon="simple-icons:bluesky" aria-label="Icon bluesky from simple-icons Iconify.design set." title="bluesky"></iconify-icon></span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://www.danolner.net/"> 
<span class="menu-text"><iconify-icon role="img" inline="" icon="simple-icons:wordpress" aria-label="Icon wordpress from simple-icons Iconify.design set." title="wordpress_site"></iconify-icon></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="../../index.xml"> <i class="bi bi-rss" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar"><div class="quarto-margin-header"><div class="margin-header-item">
<form action="
          https://buttondown.com/api/emails/embed-subscribe/danolner
         " method="post" class="form-label mt-4">
  <label for="email">Email ‚áâ</label>
  <input type="email" name="email" placeholder="" class="form-control" id="exampleInputEmail1">
  <input type="hidden" value="1" name="embed">
  <input type="submit" value="Subscribe" class="btn btn-primary">
  <p>
    <a href="https://buttondown.com" target="_blank">
      Powered by Buttondown.
    </a>
  </p>
</form>
</div></div>
        
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Why make things simple / the Douglas Adams principle</h1>
  <div class="quarto-categories">
    <div class="quarto-category">brainsystems</div>
  </div>
  </div>



<div class="quarto-title-meta">

    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">December 12, 2025</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<p>Douglas Adams <a href="https://www.reddit.com/r/quotes/comments/btuvib/i_am_rarely_happier_than_when_spending_an_entire">said</a>:</p>
<blockquote class="blockquote">
<p>‚ÄúI am rarely happier than when spending an entire day programming my computer to perform automatically a task that would otherwise take me a good ten seconds to do by hand.‚Äù</p>
</blockquote>
<p>This is exactly the kind of productivity thinking the country needs, I think. I‚Äôve been trying to follow his example recently. I am trying to disassemble how I do things / why I‚Äôm doing them / whether I should I just sit in my pants all day eating pringles / what sort of task-environment-brain re-jigs might help answer any of those questions. This is leading to many ‚Äúall day programming for a ten second task‚Äù moments.</p>
<p>It‚Äôs all part of joining in the currently very fashionable and exciting pastime of ‚Äúwondering what kind of brain I have and whether it really needs to have been so bloody difficult all this time.‚Äù (Analogy: as a left-hander, if I‚Äôd always been made to use my right hand, as was the case pre 1950ish.) Coming at it like a design problem, prototyping things that may end up on the scrapheap, is the only way.</p>
<p>So rather than get on with, say, actually working on the <a href="https://coveredinbees.org/posts/i_wrote_a_scifi_book/">sci-fi book</a> or writing about anything concrete, I‚Äôve done the following:</p>
<ul>
<li>Made this blog using <a href="https://quarto.org">Quarto</a> in R and linked it to <a href="https://buttondown.com">buttondown</a> for subscribers. Autonomy! Open source! No readers!</li>
<li>Read a bunch about distributed knowledge systems and brain diversity, leading to ‚Äì&gt;</li>
<li>Moving to <a href="https://obsidian.md">Obsidian</a> for all note-taking / thinking stuff (it‚Äôs a delight to use, if you‚Äôre already a bit markdown-leaning, and again it lets you have transparent control over all your stuff; it can also do lovely clever things like <a href="https://publish.obsidian.md/tasks/Introduction">collate tasks</a> from all sources).</li>
<li>Using Obsidian‚Äôs <a href="https://dg-docs.ole.dev">Digital Garden plugin</a> to host <a href="https://exobrain.coveredinbees.org">exobrain.coveredinbees.org</a> via Vercel autopushing to Github, setting a YAML property to dg-publish for any md file I want live (what a super, pretentious two-decades-old-type word ‚Äòexobrain‚Äô is: see the <a href="https://books.google.com/ngrams/graph?content=exobrain%2Cdigital+garden&amp;year_start=1960&amp;year_end=2022&amp;corpus=en&amp;smoothing=3&amp;case_insensitive=false">ngrams</a>, pic below also - it actually peaked in 2010, though its first ngrams appearance is in 1970, Arthur B. Bronwell‚Äôs ‚ÄòScience and Technology in the World of the Future‚Äô: ‚Äúto carry out man‚Äôs informational processing demands in much the same way that an exoskeleton carries out his powerful tasks.‚Äù)</li>
<li>Then there‚Äôs a nice little <a href="https://github.com/AndreasThinks/obsidian-to-quarto-exporter">obsidian-to-quarto plugin</a>. Err why? Because just blogging in Quarto, I‚Äôd have to manually add exobrain URLs myself, which would take me a good ten seconds by hand, so instead <a href="https://github.com/DanOlner/coveredinbees/blob/master/functions/obsidian_functions.R">I (and chatGPT) made some R functions</a> that check for Obsidian exports and, if present, convert all Obsidian internal links to exobrain URLs, as well as reformatting the YAML so the tags work correctly. So for example I can use Obsidian‚Äôs own internal link system (which has very smooth autofind) to connect to exobrain bits (e.g.&nbsp;a <a href="https://exobrain.coveredinbees.org/game-money-magic">list of starter questions</a> connecting magic, the money system and ‚Äòthe game‚Äô).</li>
</ul>
<p>So now the process of writing a blog post couldn‚Äôt be simpler. I just (1) write it in Obsidian as I‚Äôm doing now; (2) use the Obsidian-to-Quarto export function; (3) in RStudio, run the R function to convert exobrain links and YAML and move the files; (4) when in a state I‚Äôm happy to publish, move it manually to the posts folder (that could be streamlined); (5) run ‚Äòrender‚Äô on that final post in RStudio so the HTML goes to the docs folder; (6) git stage/commit and push in Gitraken to get it live on coveredinbees. Done! Just like that. Substack schmubschmack.</p>
<p>Sigh. I am reminded a little of the Mars Curiosity Rover‚Äôs landing plan (in one of my <a href="https://www.youtube.com/watch?v=Ki_Af_o9Q9s">all time favourite youtube videos</a>, recorded before they knew whether it would succeed). Aim for a flat spot, use Mars‚Äô atmosphere to slow down a little (it‚Äôs 1% the density of Earth‚Äôs), use a huge parachute, release a cap to view the ground, drop the rover carried by its own rocket stage because none of that can slow it down enough, but you can‚Äôt use rockets to land because the dust will bugger the rover‚Äôs systems - so hover above the ground and lower it on four wires, and then boost the rocket stage off to the side so it doesn‚Äôt crash on top of the now-on-Mars Curiosity. Oh and do all that entirely automatically because signals to Mars were a 14 minute round trip at the time. Done! Just like that. Elon Schmelon.</p>
<p>Here‚Äôs Jazz-student turned NASA entry/descent/landing lead <a href="https://en.wikipedia.org/wiki/Adam_Steltzner">Adam Steltzner</a>:</p>
<blockquote class="blockquote">
<p>‚ÄúWhen people look at it, it looks crazy. That‚Äôs a very natural thing. Sometimes when <em>we</em> look at it, it looks crazy. <em>It is</em> the result of reasoned engineering thought. But it still looks crazy.‚Äù</p>
</blockquote>
<p>Reasoned engineering thought, though, takes a <em>lot</em> of testing. The problem with testing human brains, or at least mine, is the tendency to default to ‚Äúyou‚Äôre just a useless idiot‚Äù and stop at that, rather than taking little steps, inching forward, playing, trying new things, seeing what goes with the grain, what rubs against it. It needs resetting daily as the self-blame module can be deeply wired in - previous perceived failures <em>obviously</em> a personal failure, says the module, rather than allowing consideration of the whole you/task/environment setup<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>.</p>
<p>So while I‚Äôm obviously getting those sweet sweet Douglas Adams Dopamine Hits from all this ridiculous tinkering, it‚Äôs‚Ä¶ not entirely ridiculous. None of this is novel - <a href="https://jzhao.xyz/posts/networked-thought">here‚Äôs a nice writeup</a> of the general digital garden idea, it‚Äôs in that ballpark. The world is littered with failed ‚ÄòSystems That Will Solve Everything‚Äô, but maybe there‚Äôs merit in this kind of slow, tentative gardening.</p>
<p>All the ‚Äòdigital garden‚Äô tech is allowing is easy linkage - it‚Äôs been described as ‚Äòyour own personal wikipedia‚Äô. But replicating existing links would seem pointless, no? So the test here is: can it be used to add little modular chunks, questions, connections? In a way that isn‚Äôt just building an ideas <a href="https://muppet.fandom.com/wiki/Oubliette">oubliette</a>? What, if anything, can it really add?</p>
<p>I‚Äôm finding that when you start playing with the task/environment/self parts, they all start affecting each other in unexpected ways. One of the most intriguing: what it‚Äôs doing to what I think words are actually <em>for</em>. That‚Äôs led to a <a href="https://exobrain.coveredinbees.org/list-of-writing-questions">List of writing questions</a> (see, nice exobrain link; sorry, some LLM assistance in that list). There‚Äôs a long section on different <a href="https://exobrain.coveredinbees.org/list-of-writing-questions#functions-of-writing-expanding-the-available-options">functions of writing</a> where ‚Äúnarrow professional words‚Äù are in the minority. There‚Äôs also writing for one‚Äôs own brain/ psychology/emotions; connection; experimentation; identity building‚Ä¶</p>
<p>That rather solipsistic view segues into bigger veins and arteries we all share. I <a href="../../drafts/what_happened_to_words/index.html">tried ‚ÄúWriting‚Äù about that</a> - it‚Äôs got some of the ideas there, but‚Ä¶ too much. Let‚Äôs see if it‚Äôs possible to pick away at it more slowly. It feels like a very specific historical moment for language, when humans have lost their monopoly on the written word (people pointing that out <a href="https://www.spglobal.com/en/research-insights/special-reports/language-modeling-the-fundamentals">here</a>, <a href="https://pmc.ncbi.nlm.nih.gov/articles/PMC11137430/">here</a>, <a href="https://bigwildmindmachine.substack.com/p/the-ny-times-vs-openai">here</a>), when the collective lighthouses we used to steer away from the Deathly Rocks of Bullshit are under well-funded, sustained attack.</p>
<p>That‚Äôs enough to make it feel like finding your own words is pointless. Working theory: it isn‚Äôt, it‚Äôs more important than ever. So let‚Äôs add that one to the list for later:</p>
<ul class="task-list">
<li><label><input type="checkbox">How to fix words so they help build a better world, not tear down our shared realities? Due üìÖ 2025-12-16 ‚Ä¶</label></li>
</ul>
<p><img src="exobrain_ngrams.png" class="img-fluid"></p>




<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>Hat tip to my partner Helen for bringing her OT background to bear.<a href="#fnref1" class="footnote-back" role="doc-backlink">‚Ü©Ô∏é</a></p></li>
</ol>
</section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "Óßã";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/coveredinbees\.org");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>